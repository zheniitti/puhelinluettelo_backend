(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{41:function(e,n,t){"use strict";t.r(n);var c=t(16),a=t.n(c),r=t(7),o=t(3),u=t(1),i=t(0),s=function(e){var n=e.handleFilterChange;return Object(i.jsxs)("div",{children:[Object(i.jsx)("label",{children:"filter shown with "}),Object(i.jsx)("input",{onChange:n})]})},l=function(e){var n=e.addPerson,t=e.handleNameChange,c=e.handleNumberChange,a=e.newName,r=e.newNumber;return Object(i.jsxs)("form",{onSubmit:n,children:[Object(i.jsxs)("div",{children:[Object(i.jsx)("label",{children:"name: "}),Object(i.jsx)("input",{type:"text",value:a,onChange:t})]}),Object(i.jsxs)("div",{children:[Object(i.jsx)("label",{children:"number: "}),Object(i.jsx)("input",{type:"text",value:r,onChange:c})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{type:"submit",children:"add"})})]})},d=function(e){var n=e.persons,t=e.filter,c=e.deletePerson;return n.filter((function(e){return e.name.includes(t)})).map((function(e){return Object(i.jsxs)("div",{children:[e.name," ",e.number,Object(i.jsx)("button",{onClick:function(){c(e.id)},children:"delete"})]},e.name)}))},b=t(4),j=t.n(b),h="https://fullstack21puhelinluettelo.herokuapp.com/api/persons",f=function(){return j.a.get(h)},m=function(e){return j.a.post(h,e)},O=function(e,n){return j.a.put("".concat(h,"/").concat(e),n)},p=function(e){return j.a.delete("".concat(h,"/").concat(e))},g=function(e){var n=e.isSuccesful,t=e.message,c={color:n?"green":"red",borderColor:n?"green":"red",background:"lightgrey",fontSize:20,bordertyle:"solid",borderRadius:5,padding:10};return null===t?(console.log("Notification message is null"),null):Object(i.jsx)("div",{style:c,children:t})},v=function(){var e=Object(u.useState)([]),n=Object(o.a)(e,2),t=n[0],c=n[1],a=Object(u.useState)(""),b=Object(o.a)(a,2),j=b[0],h=b[1],v=Object(u.useState)(""),x=Object(o.a)(v,2),w=x[0],y=x[1],S=Object(u.useState)(""),C=Object(o.a)(S,2),N=C[0],k=C[1],P=Object(u.useState)(null),D=Object(o.a)(P,2),E=D[0],F=D[1],T=Object(u.useState)(!0),I=Object(o.a)(T,2),J=I[0],z=I[1],A=Object(u.useState)(null),B=Object(o.a)(A,2),R=B[0],U=B[1];Object(u.useEffect)((function(){f().then((function(e){c(e.data)}))}),[]);var q=function(e,n){z(e),F(n),clearTimeout(R);var t=setTimeout((function(){console.log("Timeout: ".concat(n)),F(null)}),6e3);U(t)};return Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{children:"Phonebook"}),Object(i.jsx)(s,{handleFilterChange:function(e){k(e.target.value),console.log("filter changed",N)}}),Object(i.jsx)("h3",{children:"Add a new person"}),Object(i.jsx)(l,{addPerson:function(e){if(e.preventDefault(),""!==w&&""!==j){var n=!0;if(t.every((function(e){return e.name!==j||(n=!1,!1)})),n)m({name:j,number:w}).then((function(e){q(!0,"Successfully added ".concat(j," to server")),c(t.concat(e.data)),h(""),y("")})).catch((function(e){q(!1,"Failed. Error: ".concat(e))}));else if(window.confirm("".concat(j," is alredy in the phonebook, replace the number with new one?"))){var a=t.find((function(e){return e.name===j}));O(a.id,Object(r.a)(Object(r.a)({},a),{},{number:w})).then((function(e){q(!0,"Successfully changed ".concat(e.data.name,"'s number.")),f().then((function(e){c(e.data),h(""),y("")})).catch((function(e){return alert("Persons number updated in the server but error in updating UI. ".concat(e))}))})).catch((function(e){404===e.response.status&&(q(!1,"".concat(a.name," doesn't exist or it is deleted.")),f().then((function(e){c(e.data)})))}))}}else q(!1,"Name or number is empty")},handleNameChange:function(e){h(e.target.value)},handleNumberChange:function(e){y(e.target.value)},newName:j,newNumber:w}),Object(i.jsx)(g,{isSuccesful:J,message:E}),Object(i.jsx)("h3",{children:"Numbers"}),Object(i.jsx)(d,{persons:t,filter:N,deletePerson:function(e){var n=t.find((function(n){return n.id===e}));window.confirm("Delete ".concat(n.name," id:").concat(e,"?"))&&(console.log("Deleting ".concat(n.name)),p(e).then((function(a){q(!0,"Successfully deleted ".concat(n.name," from server.")),console.log("Deleted person: ".concat(n.name)),c(t.filter((function(n){return n.id!==e})))})).catch((function(e){404===e.response.status&&(q(!1,"".concat(n.name," is already deleted from server.")),f().then((function(e){c(e.data)})))})))}})]})};a.a.render(Object(i.jsx)(v,{}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.7ea26157.chunk.js.map